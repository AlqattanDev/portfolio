---
import type { BaseComponentProps } from '@/types';

export interface SectionProps extends BaseComponentProps {
  title: string;
  id?: string;
}

const {
  title,
  id: idProp,
  className = '',
  ...props
} = Astro.props as SectionProps;

// simple slugify fallback when id not provided
const slugify = (s: string) =>
  s
    .toLowerCase()
    .replace(/[^a-z0-9]+/g, '-')
    .replace(/(^-|-$)/g, '');
const sectionId = idProp ?? slugify(title);
---

<div id={sectionId} class={`section ${className}`} {...props}>
  <div class="section-header">
    <h2 class="section-title">{title}</h2>
  </div>
  <div class="subsection">
    <slot />
  </div>
</div>

<style>
  .section-header {
    margin-bottom: var(--space-lg);
  }

  .section-title {
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-semibold);
    color: var(--foreground-digital);
    margin: 0;
    padding-bottom: var(--space-xs);
    border-bottom: 1px solid var(--border-digital);
    display: inline-block;
  }

  /* Print mode styling */
  body.print-view .section-title {
    color: var(--foreground-print);
    border-bottom-color: var(--border-print);
  }
</style>
